(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[3],{497:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return ie}));var a=n(7),i=n(0),o=n.n(i),l=n(79),c=n(435),r=n(379),s=n(458),d=n(2),u=n(3),b=(n(5),n(4)),v=n(6),m=i.forwardRef((function(e,t){var n=e.disableSpacing,a=void 0!==n&&n,o=e.classes,l=e.className,c=Object(u.a)(e,["disableSpacing","classes","className"]);return i.createElement("div",Object(d.a)({className:Object(b.a)(o.root,l,!a&&o.spacing),ref:t},c))})),j=Object(v.a)({root:{display:"flex",alignItems:"center",padding:8},spacing:{"& > :not(:first-child)":{marginLeft:8}}},{name:"MuiCardActions"})(m),h=n(460),f=n(459),p=n(454),O=n(9),g=n(465),x=n(37),y=Object(x.a)(i.createElement("path",{d:"M4 12l1.41 1.41L11 7.83V20h2V7.83l5.58 5.59L20 12l-8-8-8 8z"}),"ArrowUpward"),N=Object(x.a)(i.createElement("path",{d:"M20 12l-1.41-1.41L13 16.17V4h-2v12.17l-5.58-5.59L4 12l8 8 8-8z"}),"ArrowDownward"),C=n(233),w=n(234),E=n(139),S=n(140),L=n(141),F=n(142),k=n(28),M=n(27),z=n(112),A=n(69),I=n(68),R=n(11),_=n(8),T=Object(x.a)(i.createElement("path",{d:"M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z"}),"Star");function V(e,t){if(null==e)return e;var n=Math.round(e/t)*t;return Number(n.toFixed(function(e){var t=e.toString().split(".")[1];return t?t.length:0}(t)))}function D(e){e.value;var t=Object(u.a)(e,["value"]);return i.createElement("span",t)}var B=i.createElement(T,{fontSize:"inherit"});function J(e){return"".concat(e," Star").concat(1!==e?"s":"")}var H=i.forwardRef((function(e,t){var n=e.classes,a=e.className,o=e.defaultValue,l=void 0===o?null:o,c=e.disabled,r=void 0!==c&&c,s=e.emptyIcon,v=e.emptyLabelText,m=void 0===v?"Empty":v,j=e.getLabelText,h=void 0===j?J:j,f=e.icon,p=void 0===f?B:f,O=e.IconContainerComponent,g=void 0===O?D:O,x=e.max,y=void 0===x?5:x,N=e.name,C=e.onChange,w=e.onChangeActive,E=e.onMouseLeave,S=e.onMouseMove,L=e.precision,F=void 0===L?1:L,T=e.readOnly,H=void 0!==T&&T,U=e.size,X=void 0===U?"medium":U,$=e.value,G=Object(u.a)(e,["classes","className","defaultValue","disabled","emptyIcon","emptyLabelText","getLabelText","icon","IconContainerComponent","max","name","onChange","onChangeActive","onMouseLeave","onMouseMove","precision","readOnly","size","value"]),P=Object(z.a)(N),W=Object(A.a)({controlled:$,default:l,name:"Rating"}),Y=Object(k.a)(W,2),q=Y[0],K=Y[1],Q=V(q,F),Z=Object(M.a)(),ee=i.useState({hover:-1,focus:-1}),te=ee[0],ne=te.hover,ae=te.focus,ie=ee[1],oe=Q;-1!==ne&&(oe=ne),-1!==ae&&(oe=ae);var le=Object(I.a)(),ce=le.isFocusVisible,re=le.onBlurVisible,se=le.ref,de=i.useState(!1),ue=de[0],be=de[1],ve=i.useRef(),me=Object(R.a)(se,ve),je=Object(R.a)(me,t),he=function(e){var t=parseFloat(e.target.value);K(t),C&&C(e,t)},fe=function(e){0===e.clientX&&0===e.clientY||(ie({hover:-1,focus:-1}),K(null),C&&parseFloat(e.target.value)===Q&&C(e,null))},pe=function(e){ce(e)&&be(!0);var t=parseFloat(e.target.value);ie((function(e){return{hover:e.hover,focus:t}})),w&&ae!==t&&w(e,t)},Oe=function(e){if(-1===ne){!1!==ue&&(be(!1),re());ie((function(e){return{hover:e.hover,focus:-1}})),w&&-1!==ae&&w(e,-1)}},ge=function(e,t){var a="".concat(P,"-").concat(String(e.value).replace(".","-")),o=i.createElement(g,{value:e.value,className:Object(b.a)(n.icon,e.filled?n.iconFilled:n.iconEmpty,e.hover&&n.iconHover,e.focus&&n.iconFocus,e.active&&n.iconActive)},s&&!e.filled?s:p);return H?i.createElement("span",Object(d.a)({key:e.value},t),o):i.createElement(i.Fragment,{key:e.value},i.createElement("label",Object(d.a)({className:n.label,htmlFor:a},t),o,i.createElement("span",{className:n.visuallyhidden},h(e.value))),i.createElement("input",{onFocus:pe,onBlur:Oe,onChange:he,onClick:fe,disabled:r,value:e.value,id:a,type:"radio",name:P,checked:e.checked,className:n.visuallyhidden}))};return i.createElement("span",Object(d.a)({ref:je,onMouseMove:function(e){S&&S(e);var t,n=ve.current,a=n.getBoundingClientRect(),i=a.right,o=a.left,l=n.firstChild.getBoundingClientRect().width;t="rtl"===Z.direction?(i-e.clientX)/(l*y):(e.clientX-o)/(l*y);var c=V(y*t+F/2,F);c=function(e,t,n){return e<t?t:e>n?n:e}(c,F,y),ie((function(e){return e.hover===c&&e.focus===c?e:{hover:c,focus:c}})),be(!1),w&&ne!==c&&w(e,c)},onMouseLeave:function(e){E&&E(e);ie({hover:-1,focus:-1}),w&&-1!==ne&&w(e,-1)},className:Object(b.a)(n.root,a,"medium"!==X&&n["size".concat(Object(_.a)(X))],r&&n.disabled,ue&&n.focusVisible,H&&n.readOnly),role:H?"img":null,"aria-label":H?h(oe):null},G),Array.from(new Array(y)).map((function(e,t){var a=t+1;if(F<1){var o=Array.from(new Array(1/F));return i.createElement("span",{key:a,className:Object(b.a)(n.decimal,a===Math.ceil(oe)&&(-1!==ne||-1!==ae)&&n.iconActive)},o.map((function(e,t){var n=V(a-1+(t+1)*F,F);return ge({value:n,filled:n<=oe,hover:n<=ne,focus:n<=ae,checked:n===Q},{style:o.length-1===t?{}:{width:n===oe?"".concat((t+1)*F*100,"%"):"0%",overflow:"hidden",zIndex:1,position:"absolute"}})})))}return ge({value:a,active:a===oe&&(-1!==ne||-1!==ae),filled:a<=oe,hover:a<=ne,focus:a<=ae,checked:a===Q})})),!H&&!r&&null==Q&&i.createElement(i.Fragment,null,i.createElement("input",{value:"",id:"".concat(P,"-empty"),type:"radio",name:P,defaultChecked:!0,className:n.visuallyhidden}),i.createElement("label",{className:n.pristine,htmlFor:"".concat(P,"-empty")},i.createElement("span",{className:n.visuallyhidden},m))))})),U=Object(v.a)((function(e){return{root:{display:"inline-flex",position:"relative",fontSize:e.typography.pxToRem(24),color:"#ffb400",cursor:"pointer",textAlign:"left",WebkitTapHighlightColor:"transparent","&$disabled":{opacity:.5,pointerEvents:"none"},"&$focusVisible $iconActive":{outline:"1px solid #999"}},sizeSmall:{fontSize:e.typography.pxToRem(18)},sizeLarge:{fontSize:e.typography.pxToRem(30)},readOnly:{pointerEvents:"none"},disabled:{},focusVisible:{},visuallyhidden:{border:0,clip:"rect(0 0 0 0)",height:1,margin:-1,color:"#000",overflow:"hidden",padding:0,position:"absolute",top:20,width:1},pristine:{"input:focus + &":{top:0,bottom:0,position:"absolute",outline:"1px solid #999",width:"100%"}},label:{cursor:"inherit"},icon:{display:"flex",transition:e.transitions.create("transform",{duration:e.transitions.duration.shortest}),pointerEvents:"none"},iconEmpty:{color:e.palette.action.disabled},iconFilled:{},iconHover:{},iconFocus:{},iconActive:{transform:"scale(1.2)"},decimal:{position:"relative"}}}),{name:"MuiRating"})(H),X=n(22),$=n(440),G=n(442),P=n(382),W=n(457),Y=n(456),q=n(487),K=n(183),Q=n.n(K),Z=n(383),ee=n(485),te=n(1),ne=Object(c.a)((function(e){return{icon:{marginRight:e.spacing(2)},iconImg:{width:40,height:40},iconStar:{width:20,height:20},card:{height:"100%",display:"flex",flexDirection:"column"},cardMedia:{paddingTop:"56.25%"},cardContent:{flexGrow:1},labelChip:{padding:2,marginRight:2}}}));function ae(e){ne();var t=Object(i.useState)([]),n=Object(a.a)(t,2),o=n[0],l=n[1],c=e.open,r=e.video;Object(i.useEffect)((function(){Object(O.a)("/api/labels",{method:"get"}).then((function(e){return e.json()})).then((function(e){l(e)}))}),[]);return Object(te.jsxs)(q.a,{onClose:function(){e.handleClose()},"aria-labelledby":"simple-dialog-title",open:c,children:[Object(te.jsx)(Y.a,{id:"simple-dialog-title",children:"Add New Labels"}),Object(te.jsx)(G.a,{children:o.map((function(t){return Object(te.jsx)(P.a,{button:!0,onClick:function(){return n=null===t||void 0===t?void 0:t.id,e.handleUpdate(n,null===r||void 0===r?void 0:r.id),void e.handleClose();var n},children:Object(te.jsx)(W.a,{primary:null===t||void 0===t?void 0:t.name})},(null===t||void 0===t?void 0:t.name)+(null===t||void 0===t?void 0:t.id))}))})]})}function ie(e){var t,n,c=ne(),d=e.video,u=Object(i.useContext)(O.e),b=Object(i.useState)(""),v=Object(a.a)(b,2),m=v[0],x=v[1],k=Object(i.useState)(null),M=Object(a.a)(k,2),z=M[0],A=M[1],I=Object(i.useState)(!1),R=Object(a.a)(I,2),_=R[0],T=R[1];return Object(te.jsxs)(s.a,{className:c.card,children:[Object(te.jsx)(X.a,{message:m,statusCode:z}),Object(te.jsx)(p.a,{href:"/videos/"+d.uuid,children:Object(te.jsx)(f.a,{className:c.cardMedia,image:"http://"+window.location.host+"/static/"+d.thumb_nail,title:"Image title"})}),Object(te.jsxs)(h.a,{className:c.cardContent,children:[Object(te.jsxs)(l.a,{gutterBottom:!0,variant:"h5",component:"h2",children:[Object(te.jsx)(p.a,{href:"/videos/"+d.uuid,children:d.title}),"root"===u.role||"admin"===u.role?Object(te.jsx)(o.a.Fragment,{children:Object(te.jsx)(r.a,{onClick:function(){return e=d.id,Object(O.a)("/api/videos/delete",{method:"delete",body:JSON.stringify({video_id:e})}).then((function(e){return e.json().then((function(t){x(t),A(e.status)}))})),void window.location.reload();var e},children:Object(te.jsx)(g.a,{})})}):null]}),"root"===u.role||"admin"===u.role?Object(te.jsxs)(o.a.Fragment,{children:[Object(te.jsx)($.a,{id:"Label: "}),Object(te.jsx)(Z.a,{onClick:function(){T(!0)},children:Object(te.jsx)(Q.a,{color:"primary"})}),0===(null===d||void 0===d||null===(t=d.labels)||void 0===t?void 0:t.length)&&Object(te.jsx)(ee.a,{label:Object(te.jsx)($.a,{id:"None"}),disabled:!0,size:"small"}),null===d||void 0===d?void 0:d.labels.map((function(e){return Object(te.jsx)(ee.a,{color:"secondary",size:"small",label:e.name,className:c.labelChip,onDelete:function(){return function(e,t){var n=new FormData;n.append("label_id",e),n.append("video_id",t),Object(O.a)("/api/labels/delete/video-label",{method:"DELETE",body:n}).then((function(e){return e.json().then((function(t){x(t),A(e.status)}))}))}(null===e||void 0===e?void 0:e.id,null===d||void 0===d?void 0:d.id)}},(null===e||void 0===e?void 0:e.name)+(null===e||void 0===e?void 0:e.id))})),Object(te.jsx)(ae,{open:_,handleClose:function(){T(!1)},handleUpdate:function(e,t){T(!1);var n=new FormData;n.append("label_id",e),n.append("video_id",t),Object(O.a)("/api/labels/create/video-label",{method:"POST",body:n}).then((function(e){return e.json().then((function(t){x(t),A(e.status)}))}))},video:d})]}):Object(te.jsxs)(o.a.Fragment,{children:[Object(te.jsx)($.a,{id:"Label: "}),0===(null===d||void 0===d||null===(n=d.labels)||void 0===n?void 0:n.length)&&Object(te.jsx)(ee.a,{label:Object(te.jsx)($.a,{id:"None"}),disabled:!0,size:"small"}),null===d||void 0===d?void 0:d.labels.map((function(e){return Object(te.jsx)(ee.a,{color:"secondary",size:"small",label:null===e||void 0===e?void 0:e.name,className:c.labelChip},(null===e||void 0===e?void 0:e.name)+(null===e||void 0===e?void 0:e.id))}))]}),Object(te.jsxs)(l.a,{variant:"body1",display:"block",children:[Object(te.jsx)($.a,{id:"Ratings:",defaultMessage:"Ratings:"}),Object(te.jsx)(U,{value:d.star,readOnly:!0}),"root"===u.role||"admin"===u.role?Object(te.jsxs)(o.a.Fragment,{children:[Object(te.jsx)(r.a,{onClick:function(){return e=d.id,void Object(O.a)("/api/videos/increase_star",{method:"post",body:JSON.stringify({video_id:e})}).then((function(e){return e.json().then((function(t){x(t),A(e.status)}))}));var e},children:Object(te.jsx)(y,{})}),Object(te.jsx)(r.a,{onClick:function(){return e=d.id,void Object(O.a)("/api/videos/decrease_star",{method:"post",body:JSON.stringify({video_id:e})}).then((function(e){return e.json().then((function(t){x(t),A(e.status)}))}));var e},children:Object(te.jsx)(N,{})})]}):null]})]}),Object(te.jsxs)(j,{children:[Object(te.jsx)("img",{src:w.a,className:c.iconImg}),d.viewed_number,Object(te.jsx)("img",{src:C.a,className:c.iconImg}),d.liked_number,function(e){switch(e){case"pubg":return Object(te.jsx)("img",{src:F.a,className:c.iconImg});case"dota":return Object(te.jsx)("img",{src:E.a,className:c.iconImg});case"fallguys":return Object(te.jsx)("img",{src:S.a,className:c.iconImg});case"piano":return Object(te.jsx)("img",{src:L.a,className:c.iconImg});default:return Object(te.jsx)("img",{src:E.a,className:c.iconImg})}}(d.category)]})]})}}}]);
//# sourceMappingURL=3.6397eb67.chunk.js.map