(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[3],{475:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return Y}));var a=n(7),i=n(0),o=n.n(i),c=n(91),r=n(418),l=n(363),s=n(439),u=n(2),d=n(3),m=(n(5),n(4)),v=n(6),f=i.forwardRef((function(e,t){var n=e.disableSpacing,a=void 0!==n&&n,o=e.classes,c=e.className,r=Object(d.a)(e,["disableSpacing","classes","className"]);return i.createElement("div",Object(u.a)({className:Object(m.a)(o.root,c,!a&&o.spacing),ref:t},r))})),h=Object(v.a)({root:{display:"flex",alignItems:"center",padding:8},spacing:{"& > :not(:first-child)":{marginLeft:8}}},{name:"MuiCardActions"})(f),b=n(441),p=n(440),j=n(437),g=n(10),O=n(444),y=n(36),x=Object(y.a)(i.createElement("path",{d:"M4 12l1.41 1.41L11 7.83V20h2V7.83l5.58 5.59L20 12l-8-8-8 8z"}),"ArrowUpward"),N=Object(y.a)(i.createElement("path",{d:"M20 12l-1.41-1.41L13 16.17V4h-2v12.17l-5.58-5.59L4 12l8 8 8-8z"}),"ArrowDownward"),w=n(225),E=n(226),C=n(221),M=n(222),S=n(223),L=n(224),k=n(35),F=n(30),I=n(108),A=n(67),z=n(66),R=n(11),V=n(8),T=Object(y.a)(i.createElement("path",{d:"M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z"}),"Star");function _(e,t){if(null==e)return e;var n=Math.round(e/t)*t;return Number(n.toFixed(function(e){var t=e.toString().split(".")[1];return t?t.length:0}(t)))}function B(e){e.value;var t=Object(d.a)(e,["value"]);return i.createElement("span",t)}var J=i.createElement(T,{fontSize:"inherit"});function H(e){return"".concat(e," Star").concat(1!==e?"s":"")}var X=i.forwardRef((function(e,t){var n=e.classes,a=e.className,o=e.defaultValue,c=void 0===o?null:o,r=e.disabled,l=void 0!==r&&r,s=e.emptyIcon,v=e.emptyLabelText,f=void 0===v?"Empty":v,h=e.getLabelText,b=void 0===h?H:h,p=e.icon,j=void 0===p?J:p,g=e.IconContainerComponent,O=void 0===g?B:g,y=e.max,x=void 0===y?5:y,N=e.name,w=e.onChange,E=e.onChangeActive,C=e.onMouseLeave,M=e.onMouseMove,S=e.precision,L=void 0===S?1:S,T=e.readOnly,X=void 0!==T&&T,$=e.size,D=void 0===$?"medium":$,G=e.value,U=Object(d.a)(e,["classes","className","defaultValue","disabled","emptyIcon","emptyLabelText","getLabelText","icon","IconContainerComponent","max","name","onChange","onChangeActive","onMouseLeave","onMouseMove","precision","readOnly","size","value"]),W=Object(I.a)(N),Y=Object(A.a)({controlled:G,default:c,name:"Rating"}),q=Object(k.a)(Y,2),K=q[0],P=q[1],Q=_(K,L),Z=Object(F.a)(),ee=i.useState({hover:-1,focus:-1}),te=ee[0],ne=te.hover,ae=te.focus,ie=ee[1],oe=Q;-1!==ne&&(oe=ne),-1!==ae&&(oe=ae);var ce=Object(z.a)(),re=ce.isFocusVisible,le=ce.onBlurVisible,se=ce.ref,ue=i.useState(!1),de=ue[0],me=ue[1],ve=i.useRef(),fe=Object(R.a)(se,ve),he=Object(R.a)(fe,t),be=function(e){var t=parseFloat(e.target.value);P(t),w&&w(e,t)},pe=function(e){0===e.clientX&&0===e.clientY||(ie({hover:-1,focus:-1}),P(null),w&&parseFloat(e.target.value)===Q&&w(e,null))},je=function(e){re(e)&&me(!0);var t=parseFloat(e.target.value);ie((function(e){return{hover:e.hover,focus:t}})),E&&ae!==t&&E(e,t)},ge=function(e){if(-1===ne){!1!==de&&(me(!1),le());ie((function(e){return{hover:e.hover,focus:-1}})),E&&-1!==ae&&E(e,-1)}},Oe=function(e,t){var a="".concat(W,"-").concat(String(e.value).replace(".","-")),o=i.createElement(O,{value:e.value,className:Object(m.a)(n.icon,e.filled?n.iconFilled:n.iconEmpty,e.hover&&n.iconHover,e.focus&&n.iconFocus,e.active&&n.iconActive)},s&&!e.filled?s:j);return X?i.createElement("span",Object(u.a)({key:e.value},t),o):i.createElement(i.Fragment,{key:e.value},i.createElement("label",Object(u.a)({className:n.label,htmlFor:a},t),o,i.createElement("span",{className:n.visuallyhidden},b(e.value))),i.createElement("input",{onFocus:je,onBlur:ge,onChange:be,onClick:pe,disabled:l,value:e.value,id:a,type:"radio",name:W,checked:e.checked,className:n.visuallyhidden}))};return i.createElement("span",Object(u.a)({ref:he,onMouseMove:function(e){M&&M(e);var t,n=ve.current,a=n.getBoundingClientRect(),i=a.right,o=a.left,c=n.firstChild.getBoundingClientRect().width;t="rtl"===Z.direction?(i-e.clientX)/(c*x):(e.clientX-o)/(c*x);var r=_(x*t+L/2,L);r=function(e,t,n){return e<t?t:e>n?n:e}(r,L,x),ie((function(e){return e.hover===r&&e.focus===r?e:{hover:r,focus:r}})),me(!1),E&&ne!==r&&E(e,r)},onMouseLeave:function(e){C&&C(e);ie({hover:-1,focus:-1}),E&&-1!==ne&&E(e,-1)},className:Object(m.a)(n.root,a,"medium"!==D&&n["size".concat(Object(V.a)(D))],l&&n.disabled,de&&n.focusVisible,X&&n.readOnly),role:X?"img":null,"aria-label":X?b(oe):null},U),Array.from(new Array(x)).map((function(e,t){var a=t+1;if(L<1){var o=Array.from(new Array(1/L));return i.createElement("span",{key:a,className:Object(m.a)(n.decimal,a===Math.ceil(oe)&&(-1!==ne||-1!==ae)&&n.iconActive)},o.map((function(e,t){var n=_(a-1+(t+1)*L,L);return Oe({value:n,filled:n<=oe,hover:n<=ne,focus:n<=ae,checked:n===Q},{style:o.length-1===t?{}:{width:n===oe?"".concat((t+1)*L*100,"%"):"0%",overflow:"hidden",zIndex:1,position:"absolute"}})})))}return Oe({value:a,active:a===oe&&(-1!==ne||-1!==ae),filled:a<=oe,hover:a<=ne,focus:a<=ae,checked:a===Q})})),!X&&!l&&null==Q&&i.createElement(i.Fragment,null,i.createElement("input",{value:"",id:"".concat(W,"-empty"),type:"radio",name:W,defaultChecked:!0,className:n.visuallyhidden}),i.createElement("label",{className:n.pristine,htmlFor:"".concat(W,"-empty")},i.createElement("span",{className:n.visuallyhidden},f))))})),$=Object(v.a)((function(e){return{root:{display:"inline-flex",position:"relative",fontSize:e.typography.pxToRem(24),color:"#ffb400",cursor:"pointer",textAlign:"left",WebkitTapHighlightColor:"transparent","&$disabled":{opacity:.5,pointerEvents:"none"},"&$focusVisible $iconActive":{outline:"1px solid #999"}},sizeSmall:{fontSize:e.typography.pxToRem(18)},sizeLarge:{fontSize:e.typography.pxToRem(30)},readOnly:{pointerEvents:"none"},disabled:{},focusVisible:{},visuallyhidden:{border:0,clip:"rect(0 0 0 0)",height:1,margin:-1,color:"#000",overflow:"hidden",padding:0,position:"absolute",top:20,width:1},pristine:{"input:focus + &":{top:0,bottom:0,position:"absolute",outline:"1px solid #999",width:"100%"}},label:{cursor:"inherit"},icon:{display:"flex",transition:e.transitions.create("transform",{duration:e.transitions.duration.shortest}),pointerEvents:"none"},iconEmpty:{color:e.palette.action.disabled},iconFilled:{},iconHover:{},iconFocus:{},iconActive:{transform:"scale(1.2)"},decimal:{position:"relative"}}}),{name:"MuiRating"})(X),D=n(22),G=n(423),U=n(1),W=Object(r.a)((function(e){return{icon:{marginRight:e.spacing(2)},iconImg:{width:40,height:40},iconStar:{width:20,height:20},card:{height:"100%",display:"flex",flexDirection:"column"},cardMedia:{paddingTop:"56.25%"},cardContent:{flexGrow:1}}}));function Y(e){var t=W(),n=e.video,r=Object(i.useContext)(g.e),u=Object(i.useState)(""),d=Object(a.a)(u,2),m=d[0],v=d[1],f=Object(i.useState)(null),y=Object(a.a)(f,2),k=y[0],F=y[1];return Object(U.jsxs)(s.a,{className:t.card,children:[Object(U.jsx)(D.a,{message:m,statusCode:k}),Object(U.jsx)(j.a,{href:"/videos/"+n.uuid,children:Object(U.jsx)(p.a,{className:t.cardMedia,image:"http://"+window.location.host+"/static/"+n.thumb_nail,title:"Image title"})}),Object(U.jsxs)(b.a,{className:t.cardContent,children:[Object(U.jsxs)(c.a,{gutterBottom:!0,variant:"h5",component:"h2",children:[Object(U.jsx)(j.a,{href:"/videos/"+n.uuid,children:n.title}),"root"===r.role||"admin"===r.role?Object(U.jsx)(o.a.Fragment,{children:Object(U.jsx)(l.a,{onClick:function(){return e=n.id,Object(g.a)("/api/videos/delete",{method:"delete",body:JSON.stringify({video_id:e})}).then((function(e){return e.json().then((function(t){v(t),F(e.status)}))})),void window.location.reload();var e},children:Object(U.jsx)(O.a,{})})}):null]}),Object(U.jsxs)(c.a,{variant:"h6",component:"h6",children:[Object(U.jsx)(G.a,{id:"Ratings:",defaultMessage:"Ratings:"}),Object(U.jsx)($,{value:n.star,readOnly:!0}),"root"===r.role||"admin"===r.role?Object(U.jsxs)(o.a.Fragment,{children:[Object(U.jsx)(l.a,{onClick:function(){return e=n.id,void Object(g.a)("/api/videos/increase_star",{method:"post",body:JSON.stringify({video_id:e})}).then((function(e){return e.json().then((function(t){v(t),F(e.status)}))}));var e},children:Object(U.jsx)(x,{})}),Object(U.jsx)(l.a,{onClick:function(){return e=n.id,void Object(g.a)("/api/videos/decrease_star",{method:"post",body:JSON.stringify({video_id:e})}).then((function(e){return e.json().then((function(t){v(t),F(e.status)}))}));var e},children:Object(U.jsx)(N,{})})]}):null]})]}),Object(U.jsxs)(h,{children:[Object(U.jsx)("img",{src:E.a,className:t.iconImg}),n.viewed_number,Object(U.jsx)("img",{src:w.a,className:t.iconImg}),n.liked_number,function(e){switch(e){case"pubg":return Object(U.jsx)("img",{src:L.a,className:t.iconImg});case"dota":return Object(U.jsx)("img",{src:C.a,className:t.iconImg});case"fallguys":return Object(U.jsx)("img",{src:M.a,className:t.iconImg});case"piano":return Object(U.jsx)("img",{src:S.a,className:t.iconImg});default:return Object(U.jsx)("img",{src:C.a,className:t.iconImg})}}(n.category)]})]})}}}]);
//# sourceMappingURL=3.cfc874b6.chunk.js.map