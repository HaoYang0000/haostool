(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[3],{552:function(e,t,n){"use strict";var a=n(98),i=n(99);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=i(n(0)),l=(0,a(n(100)).default)(o.createElement("path",{d:"M10 8H8v4H4v2h4v4h2v-4h4v-2h-4V8zm4.5-1.92V7.9l2.5-.5V18h2V5l-4.5 1.08z"}),"PlusOneOutlined");t.default=l},553:function(e,t,n){"use strict";var a=n(98),i=n(99);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=i(n(0)),l=(0,a(n(100)).default)(o.createElement("path",{d:"M4 11v2h8v-2H4zm15 7h-2V7.38L14 8.4V6.7L18.7 5h.3v13z"}),"ExposureNeg1Outlined");t.default=l},559:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return me}));var a=n(5),i=n(0),o=n.n(i),l=n(82),c=n(494),r=n(444),s=n(516),d=n(2),u=n(3),v=n(4),b=n(7),m=i.forwardRef((function(e,t){var n=e.disableSpacing,a=void 0!==n&&n,o=e.classes,l=e.className,c=Object(u.a)(e,["disableSpacing","classes","className"]);return i.createElement("div",Object(d.a)({className:Object(v.a)(o.root,l,!a&&o.spacing),ref:t},c))})),j=Object(b.a)({root:{display:"flex",alignItems:"center",padding:8},spacing:{"& > :not(:first-child)":{marginLeft:8}}},{name:"MuiCardActions"})(m),h=n(518),f=n(517),p=n(496),O=n(511),g=n(10),x=n(523),y=n(249),C=n(250),N=n(142),E=n(143),S=n(144),w=n(235),M=n(145),k=n(28),F=n(119),L=n(75),z=n(74),_=n(16),I=n(9),R=n(37),T=Object(R.a)(i.createElement("path",{d:"M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z"}),"Star");function V(e,t){if(null==e)return e;var n=Math.round(e/t)*t;return Number(n.toFixed(function(e){var t=e.toString().split(".")[1];return t?t.length:0}(t)))}function A(e){e.value;var t=Object(u.a)(e,["value"]);return i.createElement("span",t)}var D=i.createElement(T,{fontSize:"inherit"});function U(e){return"".concat(e," Star").concat(1!==e?"s":"")}var B=i.forwardRef((function(e,t){var n=e.classes,o=e.className,l=e.defaultValue,c=void 0===l?null:l,r=e.disabled,s=void 0!==r&&r,b=e.emptyIcon,m=e.emptyLabelText,j=void 0===m?"Empty":m,h=e.getLabelText,f=void 0===h?U:h,p=e.icon,O=void 0===p?D:p,g=e.IconContainerComponent,x=void 0===g?A:g,y=e.max,C=void 0===y?5:y,N=e.name,E=e.onChange,S=e.onChangeActive,w=e.onMouseLeave,M=e.onMouseMove,R=e.precision,T=void 0===R?1:R,B=e.readOnly,H=void 0!==B&&B,J=e.size,P=void 0===J?"medium":J,W=e.value,X=Object(u.a)(e,["classes","className","defaultValue","disabled","emptyIcon","emptyLabelText","getLabelText","icon","IconContainerComponent","max","name","onChange","onChangeActive","onMouseLeave","onMouseMove","precision","readOnly","size","value"]),$=Object(F.a)(N),q=Object(L.a)({controlled:W,default:c,name:"Rating"}),G=Object(a.a)(q,2),Y=G[0],K=G[1],Q=V(Y,T),Z=Object(k.a)(),ee=i.useState({hover:-1,focus:-1}),te=ee[0],ne=te.hover,ae=te.focus,ie=ee[1],oe=Q;-1!==ne&&(oe=ne),-1!==ae&&(oe=ae);var le=Object(z.a)(),ce=le.isFocusVisible,re=le.onBlurVisible,se=le.ref,de=i.useState(!1),ue=de[0],ve=de[1],be=i.useRef(),me=Object(_.a)(se,be),je=Object(_.a)(me,t),he=function(e){var t=parseFloat(e.target.value);K(t),E&&E(e,t)},fe=function(e){0===e.clientX&&0===e.clientY||(ie({hover:-1,focus:-1}),K(null),E&&parseFloat(e.target.value)===Q&&E(e,null))},pe=function(e){ce(e)&&ve(!0);var t=parseFloat(e.target.value);ie((function(e){return{hover:e.hover,focus:t}})),S&&ae!==t&&S(e,t)},Oe=function(e){if(-1===ne){!1!==ue&&(ve(!1),re());ie((function(e){return{hover:e.hover,focus:-1}})),S&&-1!==ae&&S(e,-1)}},ge=function(e,t){var a="".concat($,"-").concat(String(e.value).replace(".","-")),o=i.createElement(x,{value:e.value,className:Object(v.a)(n.icon,e.filled?n.iconFilled:n.iconEmpty,e.hover&&n.iconHover,e.focus&&n.iconFocus,e.active&&n.iconActive)},b&&!e.filled?b:O);return H?i.createElement("span",Object(d.a)({key:e.value},t),o):i.createElement(i.Fragment,{key:e.value},i.createElement("label",Object(d.a)({className:n.label,htmlFor:a},t),o,i.createElement("span",{className:n.visuallyhidden},f(e.value))),i.createElement("input",{onFocus:pe,onBlur:Oe,onChange:he,onClick:fe,disabled:s,value:e.value,id:a,type:"radio",name:$,checked:e.checked,className:n.visuallyhidden}))};return i.createElement("span",Object(d.a)({ref:je,onMouseMove:function(e){M&&M(e);var t,n=be.current,a=n.getBoundingClientRect(),i=a.right,o=a.left,l=n.firstChild.getBoundingClientRect().width;t="rtl"===Z.direction?(i-e.clientX)/(l*C):(e.clientX-o)/(l*C);var c=V(C*t+T/2,T);c=function(e,t,n){return e<t?t:e>n?n:e}(c,T,C),ie((function(e){return e.hover===c&&e.focus===c?e:{hover:c,focus:c}})),ve(!1),S&&ne!==c&&S(e,c)},onMouseLeave:function(e){w&&w(e);ie({hover:-1,focus:-1}),S&&-1!==ne&&S(e,-1)},className:Object(v.a)(n.root,o,"medium"!==P&&n["size".concat(Object(I.a)(P))],s&&n.disabled,ue&&n.focusVisible,H&&n.readOnly),role:H?"img":null,"aria-label":H?f(oe):null},X),Array.from(new Array(C)).map((function(e,t){var a=t+1;if(T<1){var o=Array.from(new Array(1/T));return i.createElement("span",{key:a,className:Object(v.a)(n.decimal,a===Math.ceil(oe)&&(-1!==ne||-1!==ae)&&n.iconActive)},o.map((function(e,t){var n=V(a-1+(t+1)*T,T);return ge({value:n,filled:n<=oe,hover:n<=ne,focus:n<=ae,checked:n===Q},{style:o.length-1===t?{}:{width:n===oe?"".concat((t+1)*T*100,"%"):"0%",overflow:"hidden",zIndex:1,position:"absolute"}})})))}return ge({value:a,active:a===oe&&(-1!==ne||-1!==ae),filled:a<=oe,hover:a<=ne,focus:a<=ae,checked:a===Q})})),!H&&!s&&null==Q&&i.createElement(i.Fragment,null,i.createElement("input",{value:"",id:"".concat($,"-empty"),type:"radio",name:$,defaultChecked:!0,className:n.visuallyhidden}),i.createElement("label",{className:n.pristine,htmlFor:"".concat($,"-empty")},i.createElement("span",{className:n.visuallyhidden},j))))})),H=Object(b.a)((function(e){return{root:{display:"inline-flex",position:"relative",fontSize:e.typography.pxToRem(24),color:"#ffb400",cursor:"pointer",textAlign:"left",WebkitTapHighlightColor:"transparent","&$disabled":{opacity:.5,pointerEvents:"none"},"&$focusVisible $iconActive":{outline:"1px solid #999"}},sizeSmall:{fontSize:e.typography.pxToRem(18)},sizeLarge:{fontSize:e.typography.pxToRem(30)},readOnly:{pointerEvents:"none"},disabled:{},focusVisible:{},visuallyhidden:{border:0,clip:"rect(0 0 0 0)",height:1,margin:-1,color:"#000",overflow:"hidden",padding:0,position:"absolute",top:20,width:1},pristine:{"input:focus + &":{top:0,bottom:0,position:"absolute",outline:"1px solid #999",width:"100%"}},label:{cursor:"inherit"},icon:{display:"flex",transition:e.transitions.create("transform",{duration:e.transitions.duration.shortest}),pointerEvents:"none"},iconEmpty:{color:e.palette.action.disabled},iconFilled:{},iconHover:{},iconFocus:{},iconActive:{transform:"scale(1.2)"},decimal:{position:"relative"}}}),{name:"MuiRating"})(B),J=n(17),P=n(542),W=n(499),X=n(447),$=n(515),q=n(514),G=n(544),Y=n(535),K=n(501),Q=n(120),Z=n.n(Q),ee=n(448),te=n(545),ne=n(540),ae=n(543),ie=n(170),oe=n(531),le=n(552),ce=n.n(le),re=n(553),se=n.n(re),de=n(1),ue=Object(c.a)((function(e){return{icon:{marginRight:e.spacing(2)},iconImg:{width:40,height:40},iconStar:{width:20,height:20},card:{height:"100%",display:"flex",flexDirection:"column"},cardMedia:{paddingTop:"56.25%"},cardContent:{flexGrow:1},labelChip:{padding:2,marginRight:2},generalTextMargin:{marginBottom:5}}}));function ve(e){ue();var t=Object(i.useState)([]),n=Object(a.a)(t,2),o=n[0],l=n[1],c=e.open,r=e.video;Object(i.useEffect)((function(){Object(g.a)("/api/labels",{method:"get"}).then((function(e){return e.json()})).then((function(e){l(e)}))}),[]);return Object(de.jsxs)(G.a,{onClose:function(){e.handleClose()},"aria-labelledby":"simple-dialog-title",open:c,children:[Object(de.jsx)(q.a,{id:"simple-dialog-title",children:"Add New Labels"}),Object(de.jsx)(W.a,{children:o.length>0?null===o||void 0===o?void 0:o.map((function(t){return Object(de.jsx)(X.a,{button:!0,onClick:function(){return n=null===t||void 0===t?void 0:t.id,e.handleUpdate(n,null===r||void 0===r?void 0:r.id),void e.handleClose();var n},children:Object(de.jsx)($.a,{primary:null===t||void 0===t?void 0:t.name})},(null===t||void 0===t?void 0:t.name)+(null===t||void 0===t?void 0:t.id))})):null})]})}function be(e){var t=ue(),n=e.open,o=e.video,l=Object(i.useRef)(null),c=Object(i.useState)(ie.a[0]),s=Object(a.a)(c,2),d=s[0],u=s[1];Object(i.useEffect)((function(){}),[]);return Object(de.jsxs)(G.a,{onClose:function(){e.handleClose()},fullWidth:!0,maxWidth:"md","aria-labelledby":"simple-dialog-title",open:n,children:[Object(de.jsx)(q.a,{id:"simple-dialog-title",children:"Add new source"}),Object(de.jsx)(ne.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"videoUrl",label:"source url",name:"videoUrl",autoComplete:"videoUrl",autoFocus:!0,inputRef:l}),Object(de.jsx)(ae.a,{id:"category-select-outlined-label",children:"Video Source"}),Object(de.jsx)(Y.a,{labelId:"category-select-outlined-label",id:"category-select-outlined",value:d,onChange:function(e){u(e.target.value)},label:"videoSource",children:Object(de.jsx)(K.a,{value:ie.a[0],children:ie.a[0]})}),Object(de.jsx)(r.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:t.submit,onClick:function(){return e.handleUpdate(d,l.current.value,null===o||void 0===o?void 0:o.id),void e.handleClose()},children:"Upload"})]})}function me(e){var t,n,c,d=ue(),u=e.video,v=Object(i.useContext)(g.e),b=Object(i.useState)(""),m=Object(a.a)(b,2),k=m[0],F=m[1],L=Object(i.useState)(null),z=Object(a.a)(L,2),_=z[0],I=z[1],R=Object(i.useState)(!1),T=Object(a.a)(R,2),V=T[0],A=T[1],D=Object(i.useState)(!1),U=Object(a.a)(D,2),B=U[0],W=U[1];return Object(de.jsxs)(s.a,{className:d.card,children:[Object(de.jsx)(J.a,{message:k,statusCode:_}),Object(de.jsx)(O.a,{href:"/videos/"+u.uuid,children:Object(de.jsx)(f.a,{className:d.cardMedia,image:"http://"+window.location.host+"/static/"+(null===u||void 0===u?void 0:u.thumb_nail),title:"Image title"})}),Object(de.jsxs)(h.a,{className:d.cardContent,children:[Object(de.jsxs)(l.a,{gutterBottom:!0,variant:"h5",component:"h2",children:[Object(de.jsx)(O.a,{href:"/videos/"+u.uuid,children:u.title}),"root"===v.role||"admin"===v.role?Object(de.jsx)(r.a,{onClick:function(){return e=u.id,Object(g.a)("/api/videos/delete",{method:"delete",body:JSON.stringify({video_id:e})}).then((function(e){return e.json().then((function(t){F(t),I(e.status)}))})),void window.location.reload();var e},children:Object(de.jsx)(x.a,{})}):null]}),Object(de.jsxs)(oe.a,{className:d.generalTextMargin,children:[Object(de.jsx)(P.a,{id:"Label: "}),"root"===v.role||"admin"===v.role?Object(de.jsxs)(o.a.Fragment,{children:[Object(de.jsx)(ee.a,{onClick:function(){A(!0)},children:Object(de.jsx)(Z.a,{color:"primary"})}),Object(de.jsx)(ve,{open:V,handleClose:function(){A(!1)},handleUpdate:function(e,t){A(!1);var n=new FormData;n.append("label_id",e),n.append("video_id",t),Object(g.a)("/api/labels/create/video-label",{method:"POST",body:n}).then((function(e){return e.json().then((function(t){F(t),I(e.status)}))}))},video:u})]}):null,0===(null===u||void 0===u||null===(t=u.labels)||void 0===t?void 0:t.length)&&Object(de.jsx)(te.a,{label:Object(de.jsx)(P.a,{id:"None"}),disabled:!0,size:"small"}),null===u||void 0===u||null===(n=u.labels)||void 0===n?void 0:n.map((function(t){return Object(de.jsx)(te.a,{color:"primary",size:"small",label:t.name,className:d.labelChip,onClick:function(){return n=null===t||void 0===t?void 0:t.name,void e.handleLabelChange(n);var n},onDelete:"root"===v.role||"admin"===v.role?function(){return function(e,t){var n=new FormData;n.append("label_id",e),n.append("video_id",t),Object(g.a)("/api/labels/delete/video-label",{method:"DELETE",body:n}).then((function(e){return e.json().then((function(t){F(t),I(e.status)}))}))}(null===t||void 0===t?void 0:t.id,null===u||void 0===u?void 0:u.id)}:null},(null===t||void 0===t?void 0:t.name)+(null===t||void 0===t?void 0:t.id))}))]}),"root"===v.role||"admin"===v.role?Object(de.jsxs)(oe.a,{className:d.generalTextMargin,children:[Object(de.jsx)(P.a,{id:"Video Source",defaultMessage:"Video Source"}),": ",Object(de.jsx)(ee.a,{onClick:function(){W(!0)},children:Object(de.jsx)(Z.a,{color:"primary"})}),0===(null===u||void 0===u||null===(c=u.sources)||void 0===c?void 0:c.length)&&Object(de.jsx)(te.a,{label:Object(de.jsx)(P.a,{id:"None"}),disabled:!0,size:"small"}),null===u||void 0===u?void 0:u.sources.map((function(e){return Object(de.jsx)(te.a,{color:"secondary",size:"small",label:e.name,className:d.labelChip,onDelete:function(){return function(e){var t=new FormData;t.append("source_id",e),Object(g.a)("/api/videos/source",{method:"DELETE",body:t}).then((function(e){return e.json().then((function(t){F(t),I(e.status)}))}))}(null===e||void 0===e?void 0:e.id)}},(null===e||void 0===e?void 0:e.name)+(null===e||void 0===e?void 0:e.id))})),Object(de.jsx)(be,{open:B,handleClose:function(){W(!1)},handleUpdate:function(e,t,n){W(!1);var a=new FormData;a.append("name",e),a.append("url",t),a.append("video_id",n),Object(g.a)("/api/videos/source",{method:"POST",body:a}).then((function(e){return e.json().then((function(t){F(t),I(e.status)}))}))},video:u})]}):null,Object(de.jsxs)(p.a,{container:!0,direction:"row",justify:"flex-start",alignItems:"center",children:[Object(de.jsx)(p.a,{item:!0,children:Object(de.jsx)(P.a,{id:"Ratings:",defaultMessage:"Ratings:"})}),Object(de.jsx)(p.a,{item:!0,children:Object(de.jsx)(H,{value:u.star,readOnly:!0})}),"root"===v.role||"admin"===v.role?Object(de.jsxs)(p.a,{item:!0,children:[Object(de.jsx)(ee.a,{onClick:function(){return e=u.id,void Object(g.a)("/api/videos/increase_star",{method:"post",body:JSON.stringify({video_id:e})}).then((function(e){return e.json().then((function(t){F(t),I(e.status)}))}));var e},children:Object(de.jsx)(ce.a,{})}),Object(de.jsx)(ee.a,{onClick:function(){return e=u.id,void Object(g.a)("/api/videos/decrease_star",{method:"post",body:JSON.stringify({video_id:e})}).then((function(e){return e.json().then((function(t){F(t),I(e.status)}))}));var e},children:Object(de.jsx)(se.a,{})})]}):null]})]}),Object(de.jsxs)(j,{children:[Object(de.jsx)("img",{src:C.a,className:d.iconImg}),u.viewed_number,Object(de.jsx)("img",{src:y.a,className:d.iconImg}),u.liked_number,function(e){switch(e){case"pubg":return Object(de.jsx)("img",{src:M.a,className:d.iconImg});case"dota":default:return Object(de.jsx)("img",{src:N.a,className:d.iconImg});case"fallguys":return Object(de.jsx)("img",{src:E.a,className:d.iconImg});case"piano":return Object(de.jsx)("img",{src:S.a,className:d.iconImg});case"sax":return Object(de.jsx)("img",{src:w.a,className:d.iconImg})}}(u.category)]})]})}}}]);
//# sourceMappingURL=3.03e8df9f.chunk.js.map